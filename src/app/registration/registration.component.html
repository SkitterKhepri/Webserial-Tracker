<div class="conatiner main">
  <div class="navBar">
      <app-nav-bar></app-nav-bar>
  </div>
  <div class="text-center">
    <h2 class="fw-semibold">
      Register
    </h2>
  </div>
  <div class="container mx-auto my-4 text-center w-50 border border-primary border-2 rounded">
    <form>
      <div class="form-outline mb-2 p-2">
        <label class="form-label" for="username">Username</label>
        <input type="text" name="username" [(ngModel)]="newUser.username" id="username" class="form-control" required/>
      </div>

      <div class="form-outline mb-2 p-2">
        <label class="form-label" for="email">Your Email</label>
        <input type="email" name="email" [(ngModel)]="newUser.email" id="email" class="form-control" [ngClass]="{'border border-danger' : !validEmail}" required/>
      </div>
      <label *ngIf="!validEmail" class="form-label text-danger">Please enter a valid email address</label>

      <div class="form-outline mb-2 p-2">
        <label class="form-label" for="password">Password</label>
        <input #pass1 type="password" id="password" [ngClass]="{'border border-danger' : !passMatch}" class="form-control" required/>
      </div>
      <label *ngIf="!passMatch" class="form-label text-danger">The passwords must match</label>
      <div class="form-outline mb-2 p-2">
        <label class="form-label" for="confirm-password">Repeat your password</label>
        <input #pass2 type="password" id="confirm-password" [ngClass]="{'border border-danger' : !passMatch}" class="form-control" required/>
      </div>
      <div *ngIf="errorMessage" class="alert alert-danger mt-2">
        {{ errorMessage }}
      </div>
      <div *ngIf="isLoading" class="mt-2" role="status">
        <div class="me-1">Loading...</div>
        <div class="spinner-border text-success spinner-border-sm"></div>
      </div>
      <button type="button" *ngIf="!isLoading" class="btn btn-primary btn-block mb-4" (click)="register(newUser, pass1.value, pass2.value)">Register</button>
  
      <div class="text-center">
        <div class="row">
          <div class="col-1">
            <button type="button" class="btn btn-info btn-block mb-3 ms-1" [routerLink]="['/home']">Back</button>
          </div>
          <div class="col mb-3 ms-2 text-center">
            <p>Already a member? <a [routerLink]="['/login']">Login</a></p>
          </div>
        </div>
      </div>
    </form>
  </div>  
</div>